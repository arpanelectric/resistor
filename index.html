<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="manifest" href="/resistor/manifest.json">
     
    <title>Resistor Hub</title>
    <style>
        
        header {
            
           position: absolute;        
           top: 10px;
           font-size: 25px;      
           top: 15px;
                   
            
        }
        
        
        
        
        body {
            font-family: Arial, sans-serif;
    font-size: 1.2rem;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 1400px;
    margin: auto;
    background-color: #0c2c4a;
    
           }
        #band-name {
           position: absolute;
           top: 35%; 
           line-height: 40px;           
                          }
                          
         p {
             
             background-color: #e2e2e2;
             padding-right: 10px;
             padding-left: 10px;
             border-radius: 20px;             
         }                 
                       
           a {
               color: #1d1d1b;
                              
           }           
                 #btnInstall {
  padding: 10px 20px;
  font-size: 16px;
  color: #e2e2e2;
  background-color: #007bff;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  margin-bottom: 10px;
  position: absolute;
  bottom: 0;
  left: 35%;
  
}

#btnInstall:hover {
  background-color: #0056b3;
  
}         
    </style>
</head>
<body>
    
   
    <img src="/resistor/resistor1.png" 
         style="position: absolute; 
                top: 60px;  
                width: 169px; 
                height: 169px; 
                transform: rotate(-45deg); 
                transform-origin: center; 
                z-index: -1;">
    
    <header>
      <a href="./index.html" style="text-decoration: none; color: #e2e2e2;"><b>Resistor Hub</b></a>
        
    </header>
    
   <div id="band-name">
       
       <p><a href="/resistor/3band.html" style="text-decoration: none;">3/4 Band Resistor Color Code Calculator</p>  <br><br>
  <p><a href="/resistor/5band.html" style="text-decoration: none;"> &nbsp;&nbsp;5 Band Resistor Color Code Calculator </a></p>
  
  
  </div>
  
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("service-worker.js")
        .then((registration) => {
          console.log("Service Worker registered with scope:", registration.scope);
        })
        .catch((error) => {
          console.error("Service Worker registration failed:", error);
        });
    }
  </script>
  <footer class="footer">
    <button id="btnInstall">Install App</button>
    
  </footer>

  <script>
      
      document.addEventListener('DOMContentLoaded', () => {
  const footer = document.querySelector('.footer');
  const btnInstall = document.getElementById('btnInstall');
  let deferredInstallPrompt;

  // Check if the app is running as a PWA
  const isPWA = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

  // If the app is installed, hide the install button and update footer text
  if (isPWA || localStorage.getItem('pwaInstalled') === 'true') {
    if (footer) {
      footer.innerHTML = `
        <p>&nbsp;Copyright &nbsp;&copy;&nbsp;2024-2025 &nbsp;&nbsp;&nbsp;Resistor Calculator</p>
      `;
    }
    if (btnInstall) {
      btnInstall.style.display = 'none'; // Hide the install button
    }
  }

  // Listen for 'beforeinstallprompt' to save the install prompt
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredInstallPrompt = e;
    console.log('Install prompt saved');
    if (btnInstall) {
      btnInstall.style.display = 'block'; // Show the install button
    }
  });

  // Listen for install button click
  btnInstall.addEventListener('click', () => {
    if (deferredInstallPrompt) {
      deferredInstallPrompt.prompt();
      deferredInstallPrompt.userChoice.then((choice) => {
        if (choice.outcome === 'accepted') {
          console.log('User accepted the installation');
          btnInstall.style.display = 'none';
          localStorage.setItem('pwaInstalled', 'true'); // Mark the app as installed in localStorage
        } else {
          console.log('User dismissed the installation');
        }
      });
    } else {
      alert('The installation prompt is not available at the moment.');
    }
  });

  // Listen for the 'appinstalled' event and update localStorage
  window.addEventListener('appinstalled', () => {
    console.log('App installed, hiding the button');
    btnInstall.style.display = 'none';
    localStorage.setItem('pwaInstalled', 'true');
  });
});
      
  </script>
</body>
</html>
